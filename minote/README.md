# 心情记录应用 (MiNote)

一个现代化的iOS心情记录应用，支持HealthKit集成、CSV导入导出和自定义标签管理。

## ✨ 功能特点

- **心情记录**: 记录心情状态、活动和笔记
- **HealthKit集成**: 与iOS健康app同步心情数据
- **数据管理**: CSV格式导入导出功能
- **自定义标签**: 管理个性化的心情和活动标签
- **现代界面**: 基于SwiftUI的优雅用户界面

## 📁 项目架构

```
minote/
├── SimpleMoodApp.swift              # 应用入口
├── Models/
│   └── SimpleModels.swift           # 数据模型
├── Views/                           # 用户界面
│   ├── SimpleContentView.swift     # 主页面
│   ├── AddRecordView.swift          # 添加记录
│   ├── EditRecordView.swift         # 编辑记录
│   ├── MainTabView.swift            # Tab导航
│   └── SettingsView.swift           # 设置页面
├── Managers/
│   └── HealthKitMoodManager.swift   # HealthKit管理
├── Helpers/
│   └── CSVHelper.swift              # CSV工具
└── Documentation/                   # 项目文档
```

## 🚀 技术栈

- **框架**: SwiftUI + SwiftData
- **集成**: HealthKit
- **架构**: MVVM模式
- **最低版本**: iOS 17.6+

## 📱 使用说明

### 基本功能
1. 打开应用，在主页面查看心情记录
2. 点击"+"按钮添加新的心情记录
3. 长按记录进行编辑或删除

### HealthKit同步
1. 在设置页面开启HealthKit权限
2. 选择自动同步或手动同步心情数据
3. 从健康app导入历史数据

### 数据管理
1. 在设置页面导出CSV文件
2. 使用文件app导入CSV数据
3. 管理自定义心情和活动标签

## 🔧 开发配置

1. 在Xcode中添加HealthKit能力
2. 确保Bundle Identifier唯一
3. 配置代码签名用于真机测试

## 📄 许可证

本项目仅供学习使用。
- 显示所有心情记录的列表
- 支持添加新记录
- 支持点击记录进行编辑
- 支持左滑删除记录
- 当列表为空时显示提示信息

### 4. Views/AddRecordView.swift（添加记录界面）
- 表单界面，用于输入新的心情记录
- 包含时间选择、笔记输入、心情选择、活动选择
- 数据验证（确保结束时间晚于开始时间）
- 保存记录到数据库

### 5. Views/EditRecordView.swift（编辑记录界面）
- 与添加界面类似，但用现有记录的数据预填充表单
- 支持修改记录的所有信息
- 支持删除记录功能
- 包含删除确认对话框

## 主要功能

1. **记录管理**
   - 添加新的心情记录
   - 编辑已有记录
   - 删除记录

2. **时间管理**
   - 设置开始时间和结束时间
   - 自动计算持续时间
   - 时间格式化显示

3. **心情和活动**
   - 预设的心情选项（开心、平静、难过等）
   - 预设的活动选项（工作、学习、运动等）
   - 每个选项都有对应的颜色或图标

4. **数据存储**
   - 使用SwiftData进行本地数据存储
   - 数据持久化保存

## 设计理念

- **简单易懂**：代码结构清晰，命名直观
- **充分注释**：每个文件和重要代码段都有中文注释
- **功能完整**：包含增删改查的基本功能
- **用户友好**：界面简洁，操作直观

## 如何使用

1. 打开应用后，如果是第一次使用，会看到空状态页面
2. 点击右上角"添加"按钮创建新记录
3. 填写时间、笔记、选择心情和活动后保存
4. 在主界面可以看到所有记录
5. 点击任意记录可以编辑
6. 左滑记录可以删除

## 技术要点

- SwiftUI：用于构建用户界面
- SwiftData：用于数据存储和管理
- @State：管理界面状态
- @Environment：访问环境对象（如数据库上下文）
- @Query：从数据库查询数据
- Navigation：页面导航和弹窗
- Form：表单界面
- List：列表显示

这个应用适合Swift初学者学习，代码简洁明了，功能完整实用。
